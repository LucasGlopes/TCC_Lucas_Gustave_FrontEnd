<div class="container">
    <div class="card">
        <div class="row">
            <h2 class="title">
                Histórico Pessoal
            </h2>
        </div>
    
        <mat-accordion *ngFor="let asoType of asosByType" class="accordion">
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        ASO {{asoType.title}}
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="table" >
                    <table mat-table [dataSource]="asoType.dataSource!" aria-label="listagem de asos">
        
                        <ng-container matColumnDef="data">
                            <th mat-header-cell *matHeaderCellDef> Data de Realização </th>
                            <td mat-cell *matCellDef="let element"> {{ element.dataASO }}</td>
                        </ng-container>
        
                        <ng-container matColumnDef="resultado">
                            <th mat-header-cell *matHeaderCellDef> Resultado </th>
                            <td mat-cell *matCellDef="let element"> {{element.resultadoASO}} </td>
                        </ng-container>
        
                        <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef>  </th>
                            <td mat-cell *matCellDef="let element"> 
                                <section
                                    class="buttons"
                                >
                                    <button 
                                        mat-flat-button 
                                        class="default-button"
                                        (click)="openPdf(element.idASO)"
                                    >
                                        <mat-icon>visibility</mat-icon>
                                        Ver PDF
                                    </button>
                                    <button 
                                        mat-flat-button 
                                        class="default-button"
                                        (click)="downloadPdf(element.idASO)"
                                    >
                                        <mat-icon>download</mat-icon>
                                        Baixar PDF
                                    </button>
                                </section>
    
                            </td>
                        </ng-container>
        
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                        <tr *matNoDataRow>
                            <td class="mat-cell" [attr.colspan]="displayedColumns.length">
                                <div class="no-data">Não há ASOs deste tipo cadastrados.</div>
                            </td>
                        </tr>
        
                    </table>
                </div>
            </mat-expansion-panel>
        </mat-accordion>

    </div>
    
    <div #asoPdf></div>
</div>